// Generated by CoffeeScript 1.10.0

/**
 * Serialize HTML form to JSON
 * @param {HTMLElement} form - Form element
 * @return {string} json - JSON string
 */

(function() {
  this.serialize = function(form) {
    var el, i, json, len, low, obj, ref, set;
    low = function(str) {
      return str.toLowerCase();
    };
    obj = {};
    set = function(prop, val) {
      return this[prop] = val;
    };
    if (form || low(form.nodeName) !== 'form') {
      ref = form.elements;
      for (i = 0, len = ref.length; i < len; i++) {
        el = ref[i];
        set.call(obj, el.name, (function() {
          switch (low(el.nodeName)) {
            case 'textarea':
              return el.value;
            case 'select':
              switch (el.type) {
                case 'select-one':
                  return el.value;
                case 'select-multiple':
                  return el.options;
              }
              break;
            case 'input':
              switch (el.type) {
                case 'text':
                case 'password':
                case 'button':
                case 'reset':
                case 'submit':
                  return el.value;
                case 'checkbox':
                case 'radio':
                  return el.value;
              }
          }
        })());
      }
    }
    json = JSON.stringify(obj);
    return json;
  };

}).call(this);
